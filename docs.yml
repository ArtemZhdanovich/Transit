branches:
  only:
    - develop
    - master
environment:
  access_token:
    secure: bgkFWgBVYEWGU8K+80lgwzBnK1TID6FfFgscdOhUD6hkqPietVeOe16UvnrUHqbL
only_commits:
  files:
    - docs/*
    - '**/*.md'
    - '**/*.html'
    - docs.yml
install:
  - npm install -g npm
  - ps: $env:path = $env:appdata + "\npm;" + $env:path
  - npm install -g gitbook-cli
  - npm install --no-optional
build_script:
  - node --version && npm --version
  - git config --global credential.helper store
  - ps: Add-Content "$env:USERPROFILE\.git-credentials" "https://$($env:access_token):x-oauth-basic@github.com`n"
  - "%CMD_IN_ENV% npm run docs:publish"